<div class="col-xs-12 col-sm-6 m-t-md">
    <div class="m-b-xs">
        <div class="order-items-summary-col-value inline">
            <div>
                {{'Admin.Js.OrderItemsSummary.TotalWeight'|translate}}:
            </div>
        </div>
        <div class="bold inline" ng-switch="$ctrl.weightEdit === true">
            <form class="order-items-demensions__block" ng-switch-when="true">
                <input class="form-control order-items-demensions__input" type="text" name="orderItemsSummaryDemensionsTotalWeight" validation-input-min="0" validation-input-float validation-input-text="Вес" ng-model="$ctrl.Summary.TotalWeight" />
                кг
                <span>
                    <button type="submit" class="far fa-check-circle order-items-demensions__button order-items-demensions__button--confirm" data-button-validation="$ctrl.weightApplyEdit()"></button>
                    <button type="button" class="fas fa-ban order-items-demensions__button order-items-demensions__button--danger" ng-click="$ctrl.weightCancelEdit()"></button>
                </span>
            </form>
            <span class="order-items-demensions__block" ng-switch-default>
                <span class="order-items-demensions__text" ng-bind="$ctrl.Summary.TotalWeight"></span>
                кг
                <button type="button" ng-if="$ctrl.isEdit === true" class="fas fa-pencil-alt order-items-demensions__button order-items-demensions__button--small" ng-click="$ctrl.weightStartEdit()"></button>
                <span class="order-items-note" ng-hide="$ctrl.Summary.IsNotEditedWeight">(ред.)</span>
            </span>
        </div>
        <div class="inline" ng-if="$ctrl.Summary.ShippingUseWeight">
            <span class="order-items-demensions__block">
                (для доставки<span class="order-items-demensions__text" ng-bind="$ctrl.Summary.TotalWeightFromShipping"></span>кг)
            </span>
        </div>
    </div>
    <div class="m-b-xs">
        <div class="order-items-summary-col-value inline">
            <div>
                {{'Admin.Js.OrderItemsSummary.TotalDemensions'|translate}}:
            </div>
        </div>
        <div class="bold inline" ng-switch="$ctrl.demensionsEdit === true">
            <form class="order-items-demensions__block" ng-switch-when="true">
                <input class="form-control order-items-demensions__input" type="text" name="orderItemsSummaryDemensionsTotalLength" validation-input-min="0" validation-input-float validation-input-text="Длина" ng-model="$ctrl.Summary.TotalLength" />
                x
                <input class="form-control order-items-demensions__input" type="text" name="orderItemsSummaryDemensionsTotalWidth" validation-input-min="0" validation-input-float validation-input-text="Ширина" ng-model="$ctrl.Summary.TotalWidth" />
                x
                <input class="form-control order-items-demensions__input" type="text" name="orderItemsSummaryDemensionsTotalHeight" validation-input-min="0" validation-input-float validation-input-text="Высота" ng-model="$ctrl.Summary.TotalHeight" />

                мм
                <span>
                    <button type="submit" class="far fa-check-circle order-items-demensions__button order-items-demensions__button--confirm" data-button-validation="$ctrl.demensionsApplyEdit()"></button>
                    <button type="button" class="fas fa-ban order-items-demensions__button  order-items-demensions__button--danger" ng-click="$ctrl.demensionsCancelEdit()"></button>
                </span>
            </form>
            <span class="order-items-demensions__block" ng-switch-default>
                <span class="order-items-demensions__text" ng-bind="$ctrl.Summary.TotalLength"></span>
                x
                <span class="order-items-demensions__text" ng-bind="$ctrl.Summary.TotalWidth"></span>
                x
                <span class="order-items-demensions__text" ng-bind="$ctrl.Summary.TotalHeight"></span>
                мм
                <button type="button" ng-if="$ctrl.isEdit === true" class="fas fa-pencil-alt order-items-demensions__button order-items-demensions__button--small" ng-click="$ctrl.demensionsStartEdit()"></button>
                <span class="order-items-note" ng-hide="$ctrl.Summary.IsNotEditedDimensions">(ред.)</span>
            </span>
        </div>
        <div class="inline" ng-if="$ctrl.Summary.ShippingUseDemensions">
            <span class="order-items-demensions__block">
                (для доставки
                <span class="order-items-demensions__text" ng-bind="$ctrl.Summary.TotalLengthFromShipping"></span>
                x
                <span class="order-items-demensions__text" ng-bind="$ctrl.Summary.TotalWidthFromShipping"></span>
                x
                <span class="order-items-demensions__text" ng-bind="$ctrl.Summary.TotalHeightFromShipping"></span>
                мм
                )
            </span>
        </div>
    </div>
    <div class="m-b-xs">
        <div class="m-b-xs">
            {{'Admin.Js.OrderItemsSummary.UsersComment'|translate}}:
            <button type="button" ng-if="$ctrl.isEdit === true && !$ctrl.customerCommentEdit && ($ctrl.Summary.CustomerComment == null || $ctrl.Summary.CustomerComment.length == 0)" 
                    class="fas fa-pencil-alt order-items-demensions__button order-items-demensions__button--small" ng-click="$ctrl.customerCommentStartEdit()"></button>
        </div>
        <div ng-switch="$ctrl.customerCommentEdit === true">
            <div ng-switch-when="true">
                <textarea class="form-control" rows="3" ng-model="$ctrl.Summary.CustomerComment"></textarea>
                <span>
                    <button type="button" class="far fa-check-circle order-items-demensions__button order-items-demensions__button--confirm" ng-click="$ctrl.customerCommentApplyEdit()"></button>
                    <button type="button" class="fas fa-ban order-items-demensions__button  order-items-demensions__button--danger" ng-click="$ctrl.customerCommentCancelEdit()"></button>
                </span>
            </div>
            <div ng-switch-default>
                <span class="bold" ng-bind-html="$ctrl.Summary.CustomerComment"></span>
                <button type="button" ng-if="$ctrl.isEdit === true && $ctrl.Summary.CustomerComment != null && $ctrl.Summary.CustomerComment.length > 0" class="fas fa-pencil-alt order-items-demensions__button order-items-demensions__button--small" ng-click="$ctrl.customerCommentStartEdit()"></button>
            </div>
        </div>
    </div>
    <div ng-transclude="footerLeft" class="block block--mobile-transparent m-t-md"></div>
</div>
<div class="col-xs-12 col-sm-6 m-t-md">
    <div class="row m-b-md">
        <div class="col-xs">
            <div class="text-right">
                {{'Admin.Js.OrderItemsSummary.OrderCost'|translate}}
            </div>
        </div>
        <div class="col-xs flex-grow-n order-items-summary-col-value bold">
            <span ng-bind="$ctrl.Summary.ProductsCostStr"></span>
        </div>
    </div>
    <div class="row m-b-md">
        <div class="col-xs">
            <div class="text-right">

                <div ng-switch="$ctrl.isEdit === true">
                    <div ng-switch-when="true">
                        <a href="" uib-popover-template="'orderDiscountPopover.html'"
                           popover-trigger="'none'"
                           popover-is-open="$ctrl.discountPopoverIsOpen"
                           ng-click="$ctrl.discountPopoverToggle()"
                           ng-bind="$ctrl.Summary.OrderDiscount != 0 || $ctrl.Summary.OrderDiscountValue != 0 ?  ('Admin.Js.OrderItemsSummary.Discount'|translate) : ('Admin.Js.OrderItemsSummary.AddDiscount'|translate)"></a>
                        <script type="text/ng-template" id="orderDiscountPopover.html">
                            <form name="orderFormDiscount">
                                <div class="m-b-xs bold">{{'Admin.Js.OrderItemsSummary.SpecifyDiscount'|translate}}</div>
                                <div class="input-group m-b">
                                    <span class="input-group-btn">
                                        <button type="button" class="btn btn-default" value="0" ng-click="$ctrl.toggleselectCurrencyLabel('0')" ng-class="{'label-currency-active':!$ctrl.typeDiscountPercent}"><span>{{$ctrl.Summary.OrderCurrency.CurrencySymbol}}</span></button>
                                        <button type="button" class="btn btn-default" value="1" ng-click="$ctrl.toggleselectCurrencyLabel('1')" ng-class="{'label-currency-active':$ctrl.typeDiscountPercent}"><span>%</span></button>
                                    </span>
                                    <input type="number"
                                           ng-value="$ctrl.OrderDiscountNew"
                                           ng-max="$ctrl.typeDiscountPercent ? 100 : $ctrl.Summary.ProductsCost"
                                           ng-min="0"
                                           class="form-control"
                                           ng-model="$ctrl.OrderDiscountNew" autofocus bs-modifiable="false"
                                           validation-input-float=""
                                           validation-input-text="{{:: 'Admin.Js.OrderItemsSummary.SpecifyDiscount'|translate}}" />
                                </div>
                                <div class="clearfix">
                                    <input type="submit" button-validation="$ctrl.changeDiscount($ctrl.OrderDiscountNew)" value={{'Admin.Js.OrderItemsSummary.Apply'|translate}} class="btn btn-sm btn-success pull-left" />
                                    <input type="button" value={{'Admin.Js.AddEdit.Cancel'|translate}} class="btn btn-sm btn-action pull-right" ng-click="$ctrl.discountPopoverClose()" />
                                </div>
                            </form>
                        </script>
                    </div>
                    <div ng-switch-when="false">
                        <a href=""
                           ng-click="$ctrl.onStopEdit({})"
                           ng-bind="$ctrl.Summary.OrderDiscount > 0 || $ctrl.Summary.OrderDiscountValue != 0 ?  ('Admin.Js.OrderItemsSummary.Discount'|translate) : ('Admin.Js.OrderItemsSummary.AddDiscount'|translate)"></a>
                    </div>
                </div>

            </div>
        </div>
        <div class="col-xs flex-grow-n order-items-summary-col-value bold">
            <span ng-bind="'- ' + $ctrl.Summary.ProductsDiscountPriceStr"></span>
            <span ng-if="$ctrl.Summary.OrderDiscount > 0" class="order-discount" ng-bind="'(' + $ctrl.Summary.OrderDiscount + '%)'"></span>
        </div>
    </div>

    <div class="row m-b-md" ng-if="$ctrl.Summary.Coupon == null && $ctrl.Summary.Certificate == null && $ctrl.isEdit === true">
        <div class="col-xs">
            <div class="text-right">
                <a href="" uib-popover-template="'orderCouponsPopover.html'"
                   popover-trigger="'none'"
                   popover-is-open="$ctrl.couponsPopoverIsOpen"
                   ng-click="$ctrl.couponsPopoverToggle()">{{'Admin.Js.OrderItemsSummary.AddCoupon'|translate}}</a> / 

                <a href="" uib-popover-template="'orderCertificatePopover.html'"
                   popover-trigger="'none'"
                   popover-is-open="$ctrl.certificatePopoverIsOpen"
                   ng-click="$ctrl.certificatePopoverToggle()">{{'Admin.Js.OrderItemsSummary.AddCertificate'|translate}}</a>

                <script type="text/ng-template" id="orderCouponsPopover.html">
                    <form name="orderFormCoupons">
                        <div class="m-b-xs bold">{{'Admin.Js.OrderItemsSummary.AddCoupon'|translate}}</div>
                        <div class="input-group m-b" style="width: 100%;">
                            <input type="text"
                                   class="form-control"
                                   ng-model="$ctrl.CouponCode" autofocus bs-modifiable="false"
                                   validation-input-text="{{:: 'Admin.Js.OrderItemsSummary.CouponCode'|translate}}" />
                        </div>
                        <div class="clearfix">
                            <input type="submit" button-validation="$ctrl.changeCoupon($ctrl.CouponCode)" value={{'Admin.Js.OrderItemsSummary.Apply'|translate}} class="btn btn-sm btn-success pull-left" />
                            <input type="button" value={{'Admin.Js.AddEdit.Cancel'|translate}} class="btn btn-sm btn-action pull-right" ng-click="$ctrl.couponsPopoverClose()" />
                        </div>
                    </form>
                </script>

                <script type="text/ng-template" id="orderCertificatePopover.html">
                    <form name="orderFormCertificate">
                        <div class="m-b-xs bold">{{'Admin.Js.OrderItemsSummary.AddCertificateTitle'|translate}}</div>
                        <div class="input-group m-b" style="width: 100%;">
                            <input type="text"
                                   class="form-control"
                                   ng-model="$ctrl.CertificateCode" autofocus bs-modifiable="false"
                                   validation-input-text="{{:: 'Admin.Js.OrderItemsSummary.CertificateCode'|translate}}" />
                        </div>
                        <div class="clearfix">
                            <input type="submit" button-validation="$ctrl.changeCertificate($ctrl.CertificateCode)" value={{'Admin.Js.OrderItemsSummary.Apply'|translate}} class="btn btn-sm btn-success pull-left" />
                            <input type="button" value={{'Admin.Js.AddEdit.Cancel'|translate}} class="btn btn-sm btn-action pull-right" ng-click="$ctrl.certificatePopoverClose()" />
                        </div>
                    </form>
                </script>
            </div>
        </div>
        <div class="col-xs flex-grow-n order-items-summary-col-value"></div>
    </div>
    
    <div class="row m-b-md" ng-if="$ctrl.Summary.Certificate != null">
        <div class="col-xs">
            <div class="text-right">
                {{'Admin.Js.OrderItemsSummary.CertificateTitle'|translate}} ({{$ctrl.Summary.Certificate.Code}})
            </div>
        </div>
        <div class="col-xs flex-grow-n order-items-summary-col-value  bold">
            <span ng-bind="'- ' + $ctrl.Summary.CertificatePriceStr"></span>
            <a ng-if="$ctrl.isEdit == true" href="" ng-click="$ctrl.removeCertificate()" class="link-invert link-decoration-none fas fa-times"></a>
        </div>
    </div>

    <div class="row m-b-md" ng-if="$ctrl.Summary.Coupon != null">
        <div class="col-xs">
            <div class="text-right">
                {{'Admin.Js.OrderItemsSummary.Coupon'|translate}}
                <div ng-bind="$ctrl.Summary.Coupon"></div>
            </div>
        </div>
        <div class="row col-xs flex-grow-n order-items-summary-col-value  bold">
            <span ng-bind="'- ' + $ctrl.Summary.CouponPriceStr"></span>
            <a ng-if="$ctrl.isEdit == true" href="" ng-click="$ctrl.removeCoupon()">{{'Admin.Js.OrderItemsSummary.RemoveCoupon'|translate}}</a>
        </div>
    </div>

    <div class="row m-b-md ng-cloak" ng-if="!$ctrl.Summary.CanChangeBonusAmount && $ctrl.Summary.BonusCost != 0">
        <div class="col-xs">
            <div class="text-right">
                {{'Admin.Js.OrderItemsSummary.Bonuses'|translate}}
            </div>
        </div>
        <div class="col-xs flex-grow-n order-items-summary-col-value  bold">
            <span ng-bind="'- ' + $ctrl.Summary.BonusCost"></span>
        </div>
    </div>

    <div class="row m-b-md ng-cloak" ng-if="$ctrl.Summary.CanChangeBonusAmount">
        <div class="col-xs">
            <div class="text-right">

                <a href="" uib-popover-template="'orderBonusesPopover.html'" popover-trigger="'none'" popover-is-open="$ctrl.bonusesPopoverIsOpen"
                   ng-click="$ctrl.bonusesPopoverToggle()" data-e2e="BonusPay">
                    {{'Admin.Js.OrderItemsSummary.BonusPayments'|translate}}
                </a>

                <script type="text/ng-template" id="orderBonusesPopover.html">
                    <form name="orderFormBonuses">
                        <div class="m-b-xs bold" data-e2e="BonusesAvailable">{{'Admin.Js.OrderItemsSummary.UseBonuses'|translate}} <br>({{'Admin.Js.OrderItemsSummary.Available'|translate}} {{$ctrl.Summary.BonusesAvailable}} {{'Admin.Js.OrderItemsSummary.AvailableBonuses'|translate}})</div>
                        <div class="m-b">
                            <input type="number" value="" class="form-control" ng-model="$ctrl.Summary.BonusesUseNew" ng-keyup="$event.keyCode === 13 && $ctrl.useBonuses($ctrl.Summary.BonusesUseNew)" autofocus data-e2e="BonusesUseAdd" bs-modifiable="false" />
                        </div>
                        <div class="clearfix">
                            <input type="button" value={{'Admin.Js.OrderItemsSummary.Use'|translate}} class="btn btn-sm btn-success pull-left m-r" ng-click="$ctrl.useBonuses($ctrl.Summary.BonusesUseNew)" data-e2e="BonusesUse" />
                            <input type="button" value={{'Admin.Js.AddEdit.Cancel'|translate}} class="btn btn-sm btn-action pull-right" ng-click="$ctrl.bonusesPopoverClose()" data-e2e="BonusesUseCancel" />
                        </div>
                    </form>
                </script>

            </div>
        </div>
        <div class="col-xs flex-grow-n order-items-summary-col-value  bold">
            <span ng-bind="'- ' + $ctrl.Summary.BonusCost" data-e2e="BonusCost"></span>
        </div>
    </div>

    <div class="row m-b-md">
        <div class="col-xs">
            <div class="text-right">

                <div class="relative inline"
                     ng-mouseenter="$ctrl.popoverShippingOpen()"
                     ng-mouseleave="$ctrl.popoverShippingClose()">

                    <a class="shippings-actions-toggle"
                       href=""
                       popover-trigger="'none'"
                       uib-popover-template="'shippingPopover'"
                       popover-is-open="$ctrl.popoverShippingIsOpen"
                       popover-placement="bottom-left"
                       popover-class="order-shipping__popover">
                        <i class="fa fa-cog"></i>
                    </a>

                    <script type="text/ng-template" id="shippingPopover">
                        <div class="nav text-nowrap">
                            <ui-modal-trigger size="fixed-530" data-controller="'ModalShippingsTimeCtrl'" data-controller-as="ctrl"
                                              data-resolve="{ obj: { id: $ctrl.orderId }}"
                                              data-on-close="$ctrl.getOrderItemsSummary()"
                                              template-url="../areas/admin/content/src/order/modal/shippingsTime/shippingsTime.html">
                                <a href="" class="m-t-xs m-b-xs block fs-xs">
                                    {{'Admin.Js.OrderItemsSummary.DateTimeDelivery'|translate}}
                                </a>
                            </ui-modal-trigger>
                        </div>
                        <div ng-switch="$ctrl.Summary.ShippingType" class="nav text-nowrap" ng-if="!$ctrl.Summary.IsDraft">
                            <div ng-switch-when="sdek">
                                <div ng-include="$ctrl.sdekActionsUrl"></div>
                            </div>

                            <div ng-switch-when="checkoutru">
                                <a href="" class="m-t-xs m-b-xs block fs-xs" ng-click="$ctrl.createCheckoutRuOrder()">{{'Admin.Js.OrderItemsSummary.SendOrderToCheckoutRu'|translate}}</a>
                            </div>

                            <div ng-switch-when="yandexdelivery">
                                <a href="" class="m-t-xs m-b-xs block fs-xs" ng-click="$ctrl.createYandexDeliveryOrder()">{{'Admin.Js.OrderItemsSummary.CreateDraftOrderYandexDelivery'|translate}}</a>
                            </div>

                            <div ng-switch-when="yandexnewdelivery">
                                <a href="" class="m-t-xs m-b-xs block fs-xs" ng-click="$ctrl.createYandexNewDeliveryOrder()">{{'Admin.Js.OrderItemsSummary.CreateDraftOrderYandexDelivery'|translate}}</a>
                            </div>

                            <div ng-switch-when="boxberry">
                                <a href="" class="m-t-xs m-b-xs block fs-xs" ng-click="$ctrl.createBoxberryOrder()">{{'Admin.Js.OrderItemsSummary.CreateDraftOrderBoxberry'|translate}}</a>
                                <a href="" class="m-t-xs m-b-xs block fs-xs" ng-click="$ctrl.deleteBoxberryOrder()">{{'Admin.Js.OrderItemsSummary.DeleteDraftOrderBoxberry'|translate}}</a>
                            </div>

                            <div ng-switch-when="grastin">
                                <div ng-include="$ctrl.grastinActionsUrl"></div>
                            </div>

                            <div ng-switch-when="russianpost">
                                <div ng-include="$ctrl.russianPostActionsUrl"></div>
                            </div>

                            <div ng-switch-when="shiptor">
                                <div ng-include="$ctrl.shiptorActionsUrl"></div>
                            </div>

                            <div ng-switch-when="hermes">
                                <div ng-include="$ctrl.hermesActionsUrl"></div>
                            </div>

                            <div ng-switch-when="peceasyway">
                                <div ng-include="$ctrl.pecEasywayActionsUrl"></div>
                            </div>

                            <div ng-switch-when="pec">
                                <div ng-include="$ctrl.pecActionsUrl"></div>
                            </div>

                            <div ng-switch-when="pickpoint">
                                <div ng-include="$ctrl.pickPointActionsUrl"></div>
                            </div>

                            <div ng-switch-when="ozonrocket">
                                <div ng-include="$ctrl.ozonRocketActionsUrl"></div>
                            </div>
                            <div ng-switch-when="ddelivery">
                                <a href="" class="m-t-xs m-b-xs block fs-xs" ng-click="$ctrl.createDdeliveryOrder()">{{'Admin.Js.OrderItemsSummary.DraftDDelivery'|translate}}</a>
                                <a href="" class="m-t-xs m-b-xs block fs-xs" ng-if="$ctrl.isExistDdeliveryOrder" ng-click="$ctrl.getDdeliveryOrderInfo()">{{'Admin.Js.OrderItemsSummary.InformationDDelivery'|translate}}</a>
                                <a href="" class="m-t-xs m-b-xs block fs-xs" ng-if="$ctrl.isExistDdeliveryOrder" ng-click="$ctrl.canselDdeliveryOrder()">{{'Admin.Js.OrderItemsSummary.CloseDDelivery'|translate}}</a>

                            </div>
                        </div>
                    </script>
                </div>

                <div class="relative inline" ng-switch="$ctrl.isEdit === true">
                    <div ng-switch-when="true">
                        <ui-modal-trigger size="middle" data-controller="'ModalShippingsCtrl'" data-controller-as="ctrl"
                                          data-resolve="{ order: { orderId: $ctrl.orderId, country: $ctrl.country, region: $ctrl.region, district: $ctrl.district, city: $ctrl.city, zip: $ctrl.zip }}"
                                          data-on-close="$ctrl.changeShipping(result)"
                                          template-url="../areas/admin/content/src/order/modal/shippings/shippings.html">
                            <a href="">{{'Admin.Js.OrderItemsSummary.Delivery'|translate}}</a>
                        </ui-modal-trigger>
                    </div>
                    <div ng-switch-when="false">
                        <a href="" ng-click="$ctrl.onStopEdit({})">{{'Admin.Js.OrderItemsSummary.Delivery'|translate}}</a>
                    </div>
                </div>

                <div ng-bind="$ctrl.Summary.ShippingName" class="m-b-xs"></div>
                <div class="order-modal-descr m-b-sm" ng-if="$ctrl.Summary.OrderPickPoint != null">
                    {{$ctrl.Summary.OrderPickPoint.PickPointAddress}}
                </div>
                <div class="m-b-sm" ng-if="$ctrl.Summary.DeliveryDate != null || ($ctrl.Summary.DeliveryTime != null && $ctrl.Summary.DeliveryTime.length > 0)">
                    {{'Admin.Js.OrderItemsSummary.DeliveryDate'|translate}}
                    <ui-modal-trigger size="fixed-600" data-controller="'ModalShippingsTimeCtrl'" data-controller-as="ctrl"
                                      data-resolve="{ obj: { id: $ctrl.orderId }}"
                                      data-on-close="$ctrl.getOrderItemsSummary()"
                                      template-url="../areas/admin/content/src/order/modal/shippingsTime/shippingsTime.html">
                        <a href="">{{$ctrl.Summary.DeliveryDate}} {{$ctrl.Summary.DeliveryTime}}</a>
                    </ui-modal-trigger>

                </div>
            </div>
        </div>
        <div class="col-xs flex-grow-n order-items-summary-col-value  bold">
            + <span ng-bind="$ctrl.Summary.ShippingCostStr"></span>
        </div>
    </div>

    <div class="row m-b-md">
        <div class="col-xs">
            <div class="text-right">

                <div ng-switch="$ctrl.isEdit === true">
                    <div ng-switch-when="true">
                        <ui-modal-trigger size="lg" data-controller="'ModalPaymentsCtrl'" data-controller-as="ctrl"
                                          data-resolve="{ order: { orderId: $ctrl.orderId, country: $ctrl.country, region: $ctrl.region, district: $ctrl.district, city: $ctrl.city }}"
                                          data-on-close="$ctrl.changePayment(result)"
                                          template-url="../areas/admin/content/src/order/modal/payments/payments.html">
                            <a href="">{{'Admin.Js.OrderItemsSummary.Payment'|translate}}</a>
                        </ui-modal-trigger>
                    </div>
                    <div ng-switch-when="false">
                        <a href="" ng-click="$ctrl.onStopEdit({})">{{'Admin.Js.OrderItemsSummary.Payment'|translate}}</a>
                    </div>
                </div>

                <div ng-bind="$ctrl.Summary.PaymentName" class="m-b-xs"></div>

                <div ng-if="$ctrl.Summary.ShowSendBillingLink && !$ctrl.Summary.IsDraft" class="m-b-xs">
                    <ui-modal-trigger data-controller="'ModalGetBillingLinkCtrl'" data-controller-as="ctrl"
                                      data-resolve="{params: { orderId: $ctrl.orderId }}"
                                      template-url="../areas/admin/content/src/order/modal/getBillingLink/getBillingLink.html">
                        <a href="">{{'Admin.Js.OrderItemsSummary.PaymentLink'|translate}}</a>
                    </ui-modal-trigger>
                </div>

                <ng-form novalidate="" name="paymentDetailsForm">
                    <div class="order-modal-descr" ng-if="$ctrl.Summary.PaymentDetails != null || ctrl.Summary.ShowPrintPaymentDetails">
                        <div class="m-b-xs" ng-if="$ctrl.Summary.PaymentKey == 'sberbank' || $ctrl.Summary.PaymentKey == 'bill' || $ctrl.Summary.PaymentKey == 'billby' || $ctrl.Summary.PaymentKey == 'billkz'">
                            {{'Admin.Js.OrderItemsSummary.INN'|translate}}
                            <input type="text" class="form-control payment-details-item"
                                   name="paymentDetails.inn"
                                   ng-model="$ctrl.Summary.PaymentDetails.INN"
                                   ng-blur="paymentDetailsForm['paymentDetails.inn'].modified === true && $ctrl.savePaymentDetails()" />
                        </div>
                        <div class="m-b-xs" ng-if="$ctrl.Summary.PaymentKey == 'bill' || $ctrl.Summary.PaymentKey == 'billby' || $ctrl.Summary.PaymentKey == 'billkz'">
                            {{'Admin.Js.OrderItemsSummary.CompanyName'|translate}}
                            <input type="text" class="form-control payment-details-item"
                                   name="paymentDetails.companyName"
                                   ng-model="$ctrl.Summary.PaymentDetails.CompanyName"
                                   ng-blur="paymentDetailsForm['paymentDetails.companyName'].modified === true && $ctrl.savePaymentDetails()" />
                        </div>
                        <div class="m-b-xs" ng-if="$ctrl.Summary.PaymentKey == 'billkz'">
                            {{'Admin.Js.OrderItemsSummary.Contract'|translate}}
                            <input type="text" class="form-control payment-details-item"
                                   name="paymentDetails.contract"
                                   ng-model="$ctrl.Summary.PaymentDetails.Contract"
                                   ng-blur="paymentDetailsForm['paymentDetails.contract'].modified === true && $ctrl.savePaymentDetails()" />
                        </div>
                        <div class="m-b-xs" ng-if="$ctrl.Summary.PaymentKey == 'qiwi'">
                            {{'Admin.Js.OrderItemsSummary.Phone'|translate}}
                            <input type="text" class="form-control payment-details-item"
                                   name="cpaymentDetails.phone"
                                   data-mask-control
                                   data-mask-control-preset="phone"
                                   ng-model="$ctrl.Summary.PaymentDetails.Phone"
                                   ng-blur="paymentDetailsForm['paymentDetails.phone'].modified === true && $ctrl.savePaymentDetails()" />
                        </div>
                        <div ng-if="$ctrl.Summary.ShowPrintPaymentDetails">
                            <a target="_blank" href="{{$ctrl.getPaymentDetailsLink()}}">{{$ctrl.Summary.PrintPaymentDetailsText}}</a>
                        </div>
                        <div ng-if="$ctrl.Summary.ShowPrintPaymentDetails && ($ctrl.Summary.PaymentKey == 'bill' || $ctrl.Summary.PaymentKey == 'billby' || $ctrl.Summary.PaymentKey == 'billkz')">
                            <a target="_blank" href="{{$ctrl.getPaymentDetailsLink(true)}}">{{'Js.Payment.PaymentMethod.ButtonTextWithoutStamp'|translate}}</a>
                        </div>
                    </div>
                </ng-form>
            </div>
        </div>
        <div class="col-xs flex-grow-n order-items-summary-col-value  bold">
            + <span ng-bind="$ctrl.Summary.PaymentCostStr"></span> ({{'Admin.Js.OrderItemsSummary.ExtraCharge'|translate}})
        </div>
    </div>

    <div class="row m-b-md" ng-if="$ctrl.Summary.Taxes != null" ng-repeat="tax in $ctrl.Summary.Taxes track by $index">
        <div class="col-xs">
            <div class="text-right" ng-bind-html="tax.Key"></div>
        </div>
        <div class="col-xs flex-grow-n order-items-summary-col-value  bold">
            <span ng-bind-html="tax.Value"></span>
        </div>
    </div>

    <div class="row m-b-md bold f-s-18">
        <div class="col-xs">
            <div class="text-right">
                {{'Admin.Js.OrderItemsSummary.Summary'|translate}}
            </div>
        </div>
        <div class="col-xs flex-grow-n order-items-summary-col-value  bold">
            <span ng-bind="$ctrl.Summary.SumStr" data-e2e="OrderSum"></span>
        </div>
    </div>

    <div class="row" ng-if="$ctrl.Summary.BonusCardPurchase != null">
        <div class="col-xs">
            <div data-e2e="NameBonus" class="text-right">
                <span ng-if="$ctrl.Summary.BonusCardPurchase.Status == 1">{{'Admin.Js.OrderItemsSummary.BonusesToCard'|translate}}</span>
                <span ng-if="$ctrl.Summary.BonusCardPurchase.Status != 1" ng-bind-html="'Admin.Js.OrderItemsSummary.BonusesToCardAfterPayment'|translate"></span>
            </div>
        </div>
        <div data-e2e="CountBonus" class="col-xs flex-grow-n order-items-summary-col-value  bold">
            <span ng-bind="$ctrl.Summary.BonusCardPurchase.NewBonusAmount.toFixed(2)"></span>
        </div>
    </div>
</div>

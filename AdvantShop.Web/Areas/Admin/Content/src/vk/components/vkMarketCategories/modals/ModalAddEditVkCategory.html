<form>
    <div class="modal-header">
        <ui-modal-cross></ui-modal-cross>
        <h2 class="modal-header-title">{{ctrl.type == "add" ? "Новая подборка ВКонтакте" : "Редактирование подборки ВКонтакте"}}</h2>
    </div>
    <div class="modal-body">
        
        <div class="form-group row">
            <label class="col-xs-4 control-label">
                <span class="text-required">Название</span>
            </label>
            <div class="col-xs-8">
                <input type="text" class="form-control" ng-model="ctrl.category.Name" required validation-input-text="Название" autofocus/>
            </div>
        </div>

        <div class="form-group row">
            <label class="col-xs-4 control-label">
                <span class="text-required">Категории магазина</span>
            </label>
            <div class="col-xs-8">
                <div ng-if="ctrl.category.CategoryIds != null && ctrl.category.CategoryIds.length > 0">{{ctrl.category.CategoryIds.length}} категорий</div>
                <div ng-bind="ctrl.category.Categories"></div>

                <ui-modal-trigger data-controller="'ModalSelectCategoriesCtrl'" controller-as="ctrl"
                                  template-url="../areas/admin/content/src/_shared/modal/selectCategories/selectCategories.html"
                                  data-resolve="{'params': {'selectedIds': ctrl.CategoryIds}}"
                                  data-on-close="ctrl.selectCategories(result)">
                    <a href="">Выбрать</a>
                </ui-modal-trigger>
            </div>
        </div>

        <div class="form-group row">
            <label class="col-xs-4 control-label">
                <span class="text-required">Категория ВКонтакте</span>
            </label>
            <div class="col-xs-8">
                <select ng-model="ctrl.vkCategoryId"
                        ng-options="c.Name group by c.Section.Name for c in ctrl.marketCategories"
                        class="form-control"></select>
            </div>
        </div>

        <div class="form-group row">
            <label class="col-xs-4 control-label">
                Сортировка
            </label>
            <div class="col-xs-8">
                <input type="text" class="form-control" ng-model="ctrl.category.SortOrder" />
            </div>
        </div>

    </div>
    <div class="modal-footer">
        <button class="btn btn-save btn-primary" type="button" data-button-validation-success="ctrl.save()" data-button-validation>Сохранить</button>
        <button class="btn btn-default btn-cancel" type="button" ng-click="ctrl.close()">Отмена</button>
    </div>
</form>